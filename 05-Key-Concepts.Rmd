#Key Concepts {#keyconcepts}

This section explains some key concepts in Project Big Lifeâ€™s Planning Tool. This section will explain how it works rather then how to do things.

- Multivariable Predictive Risk Algorithms
- Calculations

    - Life Expectancy
    - Cause-Deleted
    
- Health Intervention Scenarios

##Multivariable Predictive Risk Algorithms

Multivariable predictive risk algorithms predict the future risk of health outcomes (e.g. Life Expectancy) for a population using routinely collected health data.

Multivariable predictive risk algorithms can be used to:

- Project the number of new cases of the health outcome
- Estimate the contribution of specific risk factors of the health outcome
- Evaluate effectiveness of health interventions
- Describe the distribution of risk in the population (diffused or concentrated)

Multivariable predictive risk algorithms are able to assess equity issues compared to competing population risk methods (e.g. World Health Organization Global Burden of Disease).

More information on what multivariable predictive risk algorithms are and how they can be used can be found the journal article: *Predictive risk algorithms in a population setting: an overview* [@PoRTover]

###Development of  multivariable predictive risk models

**Data:**

-	Multivariable predictive risk models are created using routinely collected data that includes information about risk factors (exposure) and health events (outcomes).
-	Data is collected at an individual level through population health surveys (e.g. Canadian Community Health Survey) and administrative databases (e.g. Vital Statistics). Data sources are linked together when the individual has given permission too.
- Individuals are followed overtime until the health event (e.g. death or disease) occurs.
- Separate data is collected to create a derivation cohort and validation cohort(s). 

    - Note: The risk factors that are collected are from population health surveys and are self-reported; no clinical data (e.g. blood pressure) is collected. Risk factors focus on health behaviours (e.g. smoking) and sociodemographic factors, commonly associated with health outcome.

**Model Generation:**

- Multivariable predictive risk models are developed and validated in 4 stages:

    - Model derivation: the predictive risk model is created using data from the derivation cohort
    - Model validation: the predictive risk model is applied to the validation cohort
    - Final Model Generation: validation and derivation cohorts are combined to estimate the final application of the predictive risk model 
    - Derivation of the application model: creation of a parsimonous (fewer predictors) model that maintained discrimination, calibration, and overall model performance
    
- In each stage of the model development and validation, model performance is assessed using measures of discrimination and calibration.

###Multivariable predictive risk algorithms built in Project Big Life Planning Tool

- There is currently 1 multivariable predictive risk model is built into to Project Big Life planning tool.
```{r, echo=FALSE, results='hide', message=FALSE}
library(knitr)
library(kableExtra)
#Replicated Table 1 from MPoRTv2 Figures - Predictor variables for the MPoRTv2
(PoRTs <- data.frame(
    Title = c("Mortality Population Risk Tool"),
    Outcomes = c("5 year risk of death, Life Expectancy, Cause deleted"),
    Information =c("Appendix A"))
    )#closingbracket 
```
```{r, echo=FALSE}
#Creating the table
kable(PoRTs) %>%
  kable_styling(full_width = T)
```


##Calculations

###Life expectancy calculation

Life expectancy is calculated using abridge life-tables. 

*TO DO: further develop this section*



###Cause-deleted and cause-deleted effect calculation

**Cause-deleted** : (ref:causedeleted) - A cause-deleted health outcome is the estimated health outcome of a population if a specific cause (e.g. smoking) did not exist in that population. 

**Cause-deleted effect**: The health outcome (e.g. Life Expectancy) is calculated for both the: population with the current exposure status of the exposure (e.g. smoking status and pack-years of smoking) and a counterfactual population where these the exposures are at their reference values (e.g. smoking status = never smoker and pack-years of smoking = 0). 

The comparison of the health outcomes from the two populations are the cause-deleted effect or the health outcome attributable to that exposure.

The following table describes the terminology used for each calculation:

```{r, echo=FALSE, results='hide', message=FALSE}
library(knitr)
library(kableExtra)
#Replicated Table 1 from MPoRTv2 Figures - Predictor variables for the MPoRTv2
(cause_deleted <- data.frame(
    Original_outcome = c("Life expectancy", "Risk of mortality"),
    Counterfactual_outcome = c("Cause-deleted life expectancy", "Cause-deleted mortality risk"),
    Difference_in_outcome =c("Cause-deleted effect of life expectancy", "Cause-deleted effect of mortality risk"), 
    Measure_of_difference = c("Life years lost", "TBD"))
    )#closingbracket 
```
```{r, echo=FALSE}
#Creating the table
kable(cause_deleted) %>%
  kable_styling(full_width = T)
```

*To Do: Generate a table of the reference categories for each of the variables that can be adjusted.*

**Calculations**

1) The 5-year risk of mortality of the population is calculated using current health behaviour levels, e.g. your population will have individuals that never smoked, current smoker, former smoker who quit < 5 years ago, and former smokers that quit >= 5 years ago.

2) The "cause-deleted 5-yr mortality risk" is calculated by setting the exposure of interest (e.g. smoking status) to its reference level.

3) *To clarify: How these steps work*


## Health interventions scenarios

*TBD: whether this will be built into the platform or not. Depending on the outcome will dictate how I write the following section (e.g. do they have to manipulate thier data)*
